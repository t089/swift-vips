//
//  histogram.generated.swift
//
//  Generated by VIPS Swift Code Generator
//  DO NOT EDIT - This file is automatically generated
//

import Cvips

extension VIPSImage {

    /// Form cumulative histogram
    public func histCum() throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("out", value: &out)

            try VIPSImage.call("hist_cum", options: &opt)
        }
    }

    /// Estimate image entropy
    public func histEntropy() throws -> Double {
        try VIPSImage.execute {
            var opt = VIPSOption()

            opt.set("in", value: self.image)

            try VIPSImage.call("hist_entropy", options: &opt)
        }
    }

    /// Histogram equalisation
    ///
    /// - Parameters:
    ///   - band: Equalise with this band
    public func histEqual(band: Int = 0) throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            if band != 0 {
                opt.set("band", value: band)
            }
            opt.set("out", value: &out)

            try VIPSImage.call("hist_equal", options: &opt)
        }
    }

    /// Find image histogram
    ///
    /// - Parameters:
    ///   - band: Find histogram of band
    public func histFind(band: Int = 0) throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            if band != 0 {
                opt.set("band", value: band)
            }
            opt.set("out", value: &out)

            try VIPSImage.call("hist_find", options: &opt)
        }
    }

    /// Find indexed image histogram
    ///
    /// - Parameters:
    ///   - index: Index image
    ///   - combine: Combine bins like this
    public func histFindIndexed(index: VIPSImage, combine: VipsCombine? = nil) throws -> VIPSImage {
        return try VIPSImage([self, index]) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("index", value: index.image)
            if let combine = combine {
                opt.set("combine", value: combine)
            }
            opt.set("out", value: &out)

            try VIPSImage.call("hist_find_indexed", options: &opt)
        }
    }

    /// Find n-dimensional image histogram
    ///
    /// - Parameters:
    ///   - bins: Number of bins in each dimension
    public func histFindNdim(bins: Int = 0) throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            if bins != 0 {
                opt.set("bins", value: bins)
            }
            opt.set("out", value: &out)

            try VIPSImage.call("hist_find_ndim", options: &opt)
        }
    }

    /// Test for monotonicity
    public func histIsmonotonic() throws -> Bool {
        try VIPSImage.execute {
            var opt = VIPSOption()

            opt.set("in", value: self.image)

            try VIPSImage.call("hist_ismonotonic", options: &opt)
        }
    }

    /// Local histogram equalisation
    ///
    /// - Parameters:
    ///   - width: Window width in pixels
    ///   - height: Window height in pixels
    ///   - maxSlope: Maximum slope (CLAHE)
    public func histLocal(width: Int, height: Int, maxSlope: Int = 0) throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("width", value: width)
            opt.set("height", value: height)
            if maxSlope != 0 {
                opt.set("max_slope", value: maxSlope)
            }
            opt.set("out", value: &out)

            try VIPSImage.call("hist_local", options: &opt)
        }
    }

    /// Match two histograms
    ///
    /// - Parameters:
    ///   - ref: Reference histogram
    public func histMatch(ref: VIPSImage) throws -> VIPSImage {
        return try VIPSImage([self, ref]) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("ref", value: ref.image)
            opt.set("out", value: &out)

            try VIPSImage.call("hist_match", options: &opt)
        }
    }

    /// Normalise histogram
    public func histNorm() throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("out", value: &out)

            try VIPSImage.call("hist_norm", options: &opt)
        }
    }

    /// Plot histogram
    public func histPlot() throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("out", value: &out)

            try VIPSImage.call("hist_plot", options: &opt)
        }
    }

    /// Find hough circle transform
    ///
    /// - Parameters:
    ///   - scale: Scale down dimensions by this factor
    ///   - minRadius: Smallest radius to search for
    ///   - maxRadius: Largest radius to search for
    public func houghCircle(scale: Int = 0, minRadius: Int = 0, maxRadius: Int = 0) throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            if scale != 0 {
                opt.set("scale", value: scale)
            }
            if minRadius != 0 {
                opt.set("min_radius", value: minRadius)
            }
            if maxRadius != 0 {
                opt.set("max_radius", value: maxRadius)
            }
            opt.set("out", value: &out)

            try VIPSImage.call("hough_circle", options: &opt)
        }
    }

    /// Find hough line transform
    ///
    /// - Parameters:
    ///   - width: Horizontal size of parameter space
    ///   - height: Vertical size of parameter space
    public func houghLine(width: Int = 0, height: Int = 0) throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            if width != 0 {
                opt.set("width", value: width)
            }
            if height != 0 {
                opt.set("height", value: height)
            }
            opt.set("out", value: &out)

            try VIPSImage.call("hough_line", options: &opt)
        }
    }

    /// Calculate phase correlation
    ///
    /// - Parameters:
    ///   - in2: Second input image
    public func phasecor(in2: VIPSImage) throws -> VIPSImage {
        return try VIPSImage([self, in2]) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("in2", value: in2.image)
            opt.set("out", value: &out)

            try VIPSImage.call("phasecor", options: &opt)
        }
    }

    /// Find image profiles
    public func profile() throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("columns", value: &out)

            try VIPSImage.call("profile", options: &opt)
        }
    }

    /// Find image projections
    public func project() throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("columns", value: &out)

            try VIPSImage.call("project", options: &opt)
        }
    }

    /// Make displayable power spectrum
    public func spectrum() throws -> VIPSImage {
        return try VIPSImage(self) { out in
            var opt = VIPSOption()

            opt.set("in", value: self.image)
            opt.set("out", value: &out)

            try VIPSImage.call("spectrum", options: &opt)
        }
    }

}

//
//  morphology.generated.swift
//
//  Generated by VIPS Swift Code Generator
//  DO NOT EDIT - This file is automatically generated
//

import Cvips

extension VIPSImageProtocol where Self: ~Copyable /*, Self: ~Escapable */ {

    /// Count lines in an image
    ///
    /// - Parameters:
    ///   - direction: Countlines left-right or up-down
    public func countlines(direction: VipsDirection) throws -> Double {
        var opt = VIPSOption()

        var out: Double = 0.0

        opt.set("in", value: self.image)
        opt.set("direction", value: direction)
        opt.set("nolines", value: &out)

        try Self.call("countlines", options: &opt)

        return out
    }

    /// Morphology operation
    ///
    /// - Parameters:
    ///   - mask: Input matrix image
    ///   - morph: Morphological operation to perform
    public func morph(mask: some VIPSImageProtocol, morph: VipsOperationMorphology) throws -> Self {
        return try Self { out in
            var opt = VIPSOption()

            opt.set("in", value: self)
            opt.set("mask", value: mask)
            opt.set("morph", value: morph)
            opt.set("out", value: &out)

            try Self.call("morph", options: &opt)
        }
    }

    /// Rank filter
    ///
    /// - Parameters:
    ///   - width: Window width in pixels
    ///   - height: Window height in pixels
    ///   - index: Select pixel at index
    public func rank(width: Int, height: Int, index: Int) throws -> Self {
        return try Self { out in
            var opt = VIPSOption()

            opt.set("in", value: self)
            opt.set("width", value: width)
            opt.set("height", value: height)
            opt.set("index", value: index)
            opt.set("out", value: &out)

            try Self.call("rank", options: &opt)
        }
    }

}
